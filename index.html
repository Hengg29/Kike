<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Permissions-Policy" content="payment=(self)">
    <title>Enrique Garza - Visagismo Profesional</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Mercado Pago SDK -->
    <script src="https://sdk.mercadopago.com/js/v2"></script>
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AYs-LWLc-c3Md_EgJlDQ8Or5Mpzrn8ozxjU_a1C-ayXKlGiWb3SbhBGiBfnWjuWQRkBf_GzUKn8M8Buy&components=buttons&enable-funding=venmo&currency=MXN"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: #2c3e50;
            padding: 20px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: #fff;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #D4AF37;
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-links a {
            color: #fff;
            font-size: 20px;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: #D4AF37;
        }

        /* Hero Section */
        .hero {
            position: relative;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            overflow: hidden;
        }

        .hero-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .hero-video iframe {
            width: 100%;
            height: 100%;
            border: none;
            object-fit: cover;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: 2;
        }

        .hero-content {
            position: relative;
            z-index: 3;
            color: #fff;
            max-width: 800px;
            padding: 0 20px;
        }

        .hero-controls {
            position: absolute;
            bottom: 30px;
            right: 30px;
            z-index: 4;
            display: flex;
            gap: 10px;
        }

        .video-control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            padding: 12px 16px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            font-size: 16px;
        }

        .video-control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: #D4AF37;
        }

        .video-control-btn.active {
            background: #D4AF37;
            border-color: #D4AF37;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .hero-content .highlight {
            color: #D4AF37;
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-button {
            display: inline-block;
            background: #D4AF37;
            color: #fff;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background 0.3s;
            border: none;
            cursor: pointer;
        }

        .cta-button:hover {
            background: #B8941F;
        }

        /* Calendar Section */
        .calendar-section {
            padding: 80px 0;
            background: #ecf0f1;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #000;
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 50px;
        }

        .calendar-container {
            background: #fff;
            border: 2px solid #D4AF37;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
        }

        .calendar-scroll-wrapper {
            position: relative;
            width: 100%;
        }

        .calendar-container iframe {
            width: 100%;
            height: 600px;
            border: none;
            border-radius: 5px;
            display: block;
            position: relative;
            z-index: 1;
        }

        /* Lock Overlay Styles */
        .calendar-container.locked {
            position: relative;
            min-height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calendar-lock-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            text-align: center;
            padding: 40px 20px;
        }

        .lock-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        .calendar-lock-overlay h3 {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .calendar-lock-overlay p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .lock-message {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #D4AF37;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .lock-message p {
            margin: 0;
            font-size: 1rem;
            color: #D4AF37;
            font-weight: 500;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Unlocked state */
        .calendar-container.unlocked .calendar-lock-overlay {
            display: none;
        }

        .calendar-container.unlocked .calendar-scroll-wrapper {
            display: block !important;
        }

        /* About Section */
        .about {
            padding: 80px 0;
            background: #f8f8f8;
        }

        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
        }

        .about-text h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #000;
        }

        .about-text p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            gap: 30px;
            margin-top: 30px;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #D4AF37;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .about-image {
            text-align: center;
        }

        .about-image img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* Services Section */
        .services {
            padding: 80px 0;
            background: #ecf0f1;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 50px;
            align-items: start;
           
        }

            .service-card {
                background: #f8f9fa;
                border: 2px solid #bdc3c7;
                border-radius: 10px;
                padding: 20px 5px !important;
                text-align: center;
                transition: all 0.3s;
                position: relative;
                cursor: pointer;
                height: auto;
                
            }

        .service-card:hover {
            border-color: #D4AF37;
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }

        .service-card.popular {
            border-color: #D4AF37;
            transform: scale(1.05);
        }

        .popular-badge {
            position: absolute;
            top: -10px;
            right: 20px;
            background: #D4AF37;
            color: #fff;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .service-card h3 {
            font-size: 1.5rem;
            margin-bottom: 25px !important;
            color: #000;
        }

        .service-price {
            font-size: 2rem;
            font-weight: bold;
            color: #D4AF37;
            margin-bottom: 20px !important;
        }

        .service-duration {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 25px !important;
            font-style: italic;
        }

        .service-description {
            color: #666;
            margin-bottom: 30px !important;
            line-height: 1.7;
            padding: 0 15px !important;
        }

        .service-ideal {
            background: #f8f9fa;
            padding: 25px !important;
            border-left: 4px solid #D4AF37;
            margin: 30px 0 !important;
            font-size: 0.9rem;
            color: #555;
            border-radius: 0 5px 5px 0;
        }

        .service-features {
            list-style: none;
            margin-bottom: 35px !important;
            padding: 0 15px !important;
        }

        .service-features li {
            padding: 12px 0 !important;
            color: #666;
            position: relative;
            padding-left: 25px;
        }

        .service-features li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #D4AF37;
            font-weight: bold;
        }

        .service-button {
            background: #000;
            color: #fff;
            padding: 15px 25px !important;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            width: 100%;
            margin-top: 20px !important;
        }

        .service-card.popular .service-button {
            background: #D4AF37;
        }

        .service-button:hover {
            background: #333;
        }

            .service-card.popular .service-button:hover {
            background: #B8941F;
        }

        /* Mobile service card expansion */
        .service-card.mobile-expanded {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
            background: #fff;
            border-radius: 0;
            padding: 20px;
            overflow-y: auto;
            transform: none;
            box-shadow: none;
        }

        .service-card.mobile-expanded .service-features {
            display: block;
        }

        .service-card.mobile-expanded .service-description {
            display: block;
        }

        .mobile-close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #D4AF37;
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
            display: none;
        }

        .service-card.mobile-expanded .mobile-close-btn {
            display: block;
        }

        .service-card.mobile-expanded .popular-badge {
            display: none;
        }

        /* Before After Section */
        .before-after {
            padding: 80px 0;
            background: #f8f8f8;
        }

        .before-after-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .before-after-item {
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }


        .before-after-item img {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

        .before-after-content {
            padding: 20px;
        }

        .before-after-content h4 {
            color: #000;
            margin-bottom: 10px;
        }

        .before-after-content p {
            color: #666;
            font-size: 0.9rem;
        }

        /* FAQ Section */
        .faq {
            padding: 80px 0;
            background: #fff;
        }

        .faq-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .faq-item {
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 20px;
            background: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .faq-question {
            padding: 20px;
            cursor: pointer;
            font-weight: bold;
            color: #000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f8f8;
            border-bottom: 1px solid #e0e0e0;
        }

        .faq-answer {
            padding: 20px;
            color: #666;
            display: none;
        }

        .faq-answer.active {
            display: block;
        }

        .faq-video {
            width: 100%;
            max-width: 300px;
            height: 500px;
            border-radius: 15px;
            margin: 0 auto 15px auto;
            object-fit: cover;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            display: block;
        }


        .faq-text {
            font-size: 16px;
            line-height: 1.6;
        }

        .faq-icon {
            transition: transform 0.3s;
            font-size: 18px;
        }

        .faq-item.active .faq-icon {
            transform: rotate(180deg);
        }

        /* Testimonials Section */
        .testimonials {
            padding: 80px 0;
            background: #f8f8f8;
        }

        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .testimonial-card {
            background: #fff;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            transition: transform 0.3s ease;
        }

        .testimonial-card:hover {
            transform: translateY(-5px);
        }

        .testimonial-stars {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }

        .star {
            color: #D4AF37;
            font-size: 20px;
        }

        .testimonial-text {
            font-size: 16px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 20px;
            font-style: italic;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .author-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, #D4AF37, #B8941F);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: bold;
            font-size: 18px;
        }

        .author-info h4 {
            color: #000;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .author-info p {
            color: #666;
            font-size: 14px;
        }

        /* Payment Selection Styles */
        .payment-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .payment-card {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .payment-card:hover {
            border-color: #D4AF37;
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }

        .payment-card.popular {
            border-color: #D4AF37;
            transform: scale(1.05);
        }

        .payment-card.popular:hover {
            transform: scale(1.05) translateY(-5px);
        }

        .popular-badge {
            position: absolute;
            top: -10px;
            right: 20px;
            background: #D4AF37;
            color: #fff;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .payment-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #000;
        }

        .payment-card .price {
            font-size: 2rem;
            font-weight: bold;
            color: #D4AF37;
            margin-bottom: 15px;
        }

        .payment-card p {
            color: #666;
            margin-bottom: 25px;
            font-size: 0.9rem;
        }

        .payment-btn {
            background: #D4AF37;
            color: #fff;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-size: 16px;
        }

        .payment-btn:hover {
            background: #B8941F;
            transform: translateY(-2px);
        }

        .payment-card.popular .payment-btn {
            background: #000;
        }

        .payment-card.popular .payment-btn:hover {
            background: #333;
        }

        /* Footer */
        footer {
            background: #2c3e50;
            color: #fff;
            padding: 50px 0 30px;
            text-align: center;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
            text-align: center;
        }

        .footer-section h3 {
            color: #D4AF37;
            margin-bottom: 15px;
        }

        .footer-section p, .footer-section a {
            color: #ccc;
            text-decoration: none;
            margin-bottom: 10px;
            display: block;
        }

        .footer-section a:hover {
            color: #D4AF37;
        }

        .social-icons {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
            width: 100%;
        }

        .social-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 24px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .social-icon:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .instagram {
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            color: white;
        }

        .tiktok {
            background: linear-gradient(45deg, #000000 0%, #ff0050 50%, #00f2ea 100%);
            color: white;
        }

        .whatsapp {
            background: linear-gradient(45deg, #25d366 0%, #128c7e 100%);
            color: white;
        }

        .footer-bottom {
            border-top: 1px solid #333;
            padding-top: 20px;
            color: #999;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .hero-controls {
                bottom: 20px;
                right: 20px;
                flex-direction: column;
                gap: 8px;
            }

            .video-control-btn {
                padding: 10px 12px;
                font-size: 14px;
            }

            .about-content {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .stats {
                justify-content: center;
            }

            .services-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .service-card {
                padding: 20px 15px;
                margin-bottom: 10px;
            }

            .service-card h3 {
                font-size: 1.1rem;
                margin-bottom: 8px;
            }

            .service-price {
                font-size: 1.3rem;
                margin-bottom: 10px;
            }

            .service-description {
                font-size: 0.9rem;
                margin-bottom: 15px;
                display: none; /* Ocultar por defecto en m√≥vil */
            }

            .service-features {
                margin-bottom: 20px;
                display: none; /* Ocultar por defecto en m√≥vil */
            }

            .service-features li {
                padding: 5px 0;
                font-size: 0.9rem;
            }

            .service-button {
                padding: 8px 16px;
                font-size: 13px;
            }

            /* Mostrar bot√≥n de "Ver m√°s" en m√≥vil */
            .service-card::after {
                content: "Ver m√°s detalles";
                display: block;
                color: #D4AF37;
                font-size: 0.9rem;
                margin-top: 10px;
                font-weight: bold;
            }

            .service-card.popular {
                transform: none;
                padding: 15px;
            }

            .service-card.popular h3 {
                font-size: 1.1rem;
                margin-bottom: 8px;
            }

            .service-card.popular .service-price {
                font-size: 1.3rem;
                margin-bottom: 10px;
            }

            .before-after-grid {
                grid-template-columns: 1fr;
            }

            .testimonials-grid {
                grid-template-columns: 1fr;
            }


            .social-icons {
                gap: 15px;
                justify-content: center;
            }

            .social-icon {
                width: 45px;
                height: 45px;
                font-size: 20px;
            }

            .faq-video {
                height: 400px;
                max-width: 250px;
            }

            .calendar-container iframe {
                height: 500px;
            }

            .calendar-container.locked {
                min-height: 500px;
            }

            .lock-icon {
                font-size: 3rem;
            }

            .calendar-lock-overlay h3 {
                font-size: 1.5rem;
            }

            .calendar-lock-overlay p {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .hero-content h1 {
                font-size: 2rem;
            }

            .hero-content p {
                font-size: 1rem;
            }

            .cta-button {
                padding: 12px 20px;
                font-size: 14px;
                margin: 5px;
            }

            /* Servicios m√°s compactos en m√≥viles peque√±os */
            .services-grid {
                gap: 15px;
            }

            .service-card {
                padding: 18px 12px;
                margin-bottom: 8px;
            }

            .service-card h3 {
                font-size: 1rem;
                margin-bottom: 6px;
            }

            .service-price {
                font-size: 1.2rem;
                margin-bottom: 8px;
            }

            .service-description {
                font-size: 0.85rem;
                margin-bottom: 12px;
                line-height: 1.4;
            }

            .service-features {
                margin-bottom: 15px;
            }

            .service-features li {
                padding: 3px 0;
                font-size: 0.8rem;
            }

            .service-button {
                padding: 6px 12px;
                font-size: 12px;
            }

            .service-card.popular {
                padding: 12px;
            }

            .service-card.popular h3 {
                font-size: 1rem;
                margin-bottom: 6px;
            }

            .service-card.popular .service-price {
                font-size: 1.2rem;
                margin-bottom: 8px;
            }

            .calendar-container iframe {
                height: 400px;
            }

            .calendar-container.locked {
                min-height: 400px;
            }

            .lock-icon {
                font-size: 2.5rem;
            }

            .calendar-lock-overlay h3 {
                font-size: 1.3rem;
            }

            .calendar-lock-overlay p {
                font-size: 0.9rem;
            }

            .lock-message {
                padding: 15px;
            }
        }

        /* Tablet specific styles */
        @media (max-width: 1024px) and (min-width: 769px) {
            .calendar-container iframe {
                height: 550px;
            }

            .calendar-container.locked {
                min-height: 550px;
            }

            .lock-icon {
                font-size: 3.5rem;
            }

            .calendar-lock-overlay h3 {
                font-size: 1.6rem;
            }
        }

        /* Video Modal */
        .video-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
        }

        .video-modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
        }

        .video-modal iframe {
            width: 100%;
            height: 450px;
            border: none;
            border-radius: 10px;
        }

        .close-video {
            position: absolute;
            top: -40px;
            right: 0;
            color: #fff;
            font-size: 30px;
            cursor: pointer;
        }

        /* Payment Modal */
        .payment-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
        }

        .payment-modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
        }

        .close-payment {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
        }

        .payment-form {
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .payment-button {
            background: #D4AF37;
            color: #fff;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
        }

        .payment-button:hover {
            background: #B8941F;
        }

        /* SweetAlert2 Custom Styles */
        .swal2-popup {
            font-family: 'Arial', sans-serif !important;
        }

        .swal2-title {
            color: #000 !important;
            font-weight: bold !important;
        }

        .swal2-html-container {
            color: #666 !important;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="container">
            <div class="logo">Enrique Garza</div>
            <ul class="nav-links">
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#servicios">Servicios</a></li>
                <li><a href="#sobre-mi">Sobre M√≠</a></li>
                <li><a href="#resultados">Resultados</a></li>
                <li><a href="#faq">FAQ</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="inicio" class="hero">
        <div class="hero-video" id="heroVideo">
            <iframe 
                id="heroIframe"
                src="https://www.youtube.com/embed/BE06c_xAyjM?si=YTDGYXVYYBYEyC8c&autoplay=1&mute=1&loop=1&playlist=BE06c_xAyjM&controls=0&showinfo=0&rel=0&modestbranding=1" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
            </iframe>
        </div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1>Transforma tu <span class="highlight">Estilo</span> con <span class="highlight">Visagismo</span></h1>
            <p>Descubre tu mejor versi√≥n con t√©cnicas profesionales de visagismo que realzan tu belleza natural</p>
            <a href="#reservar" class="cta-button">Reservar Cita</a>
        </div>
        <div class="hero-controls">
            <button class="video-control-btn" id="muteBtn" onclick="toggleMute()">üîá</button>
            <button class="video-control-btn" id="playBtn" onclick="togglePlay()">‚è∏Ô∏è</button>
        </div>
    </section>

    <!-- Payment Selection Section -->
    <section id="reservar" class="calendar-section">
        <div class="container">
            <h2 class="section-title">Agenda tu Cita</h2>
            <p class="section-subtitle">Primero selecciona tu servicio y realiza el pago</p>
            
            <!-- Payment Selection Cards -->
            <div class="payment-selection">
                <div class="payment-card" onclick="selectService('corte', 499)">
                    <h3>Corte de Cabello</h3>
                    <div class="price">$499 MXN</div>
                    <p>Pago requerido antes de reservar</p>
                    <button class="payment-btn">Pagar y Reservar</button>
                </div>
                
                <div class="payment-card" onclick="selectService('asesoria-presencial', 799)">
                    <h3>Asesor√≠a Presencial</h3>
                    <div class="price">$799 MXN</div>
                    <p>Pago requerido antes de reservar</p>
                    <button class="payment-btn">Pagar y Reservar</button>
                </div>
                
                <div class="payment-card" onclick="selectService('asesoria-online', 1599)">
                    <h3>Asesor√≠a Online</h3>
                    <div class="price">$1,599 MXN</div>
                    <p>Pago requerido antes de reservar</p>
                    <button class="payment-btn">Pagar y Reservar</button>
                </div>
            </div>
            
            <!-- Locked Calendar (shown with lock) -->
            <div class="calendar-container locked" id="calendarContainer">
                <div class="calendar-lock-overlay">
                    <div class="lock-icon">üîí</div>
                    <h3>Calendario Bloqueado</h3>
                    <p>Realiza el pago primero para desbloquear el calendario</p>
                    <div class="lock-message">
                        <p>üí≥ Selecciona un servicio y paga para continuar</p>
                    </div>
                </div>
                <div class="calendar-scroll-wrapper" style="display: none;">
                    <iframe id="calendlyIframe" src="" title="Reservar cita - Calendly"></iframe>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="sobre-mi" class="about">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <h2>Sobre Enrique Garza</h2>
                    <p>Soy Enrique Garza Morales, barbero y visagista especializado en el p√∫blico masculino, creando estilos que se adaptan a la esencia, proporciones y momento de vida de cada persona.</p>
                    <p>He estudiado con maestros de talla internacional en Espa√±a, Londres, Los √Ångeles, Denver, Monterrey, Chile y Brasil, adem√°s de contar con una maestr√≠a en est√©tica capilar, diagn√≥sticos y tratamientos por Escneca (Espa√±a).</p>
                    <p>Mi diferencia est√° en aplicar t√©cnicas internacionales con un enfoque en visagismo, lo que permite lograr cortes con estructura, equilibrio y prop√≥sito, m√°s all√° de solo cambiar el cabello. Mi agenda suele llenarse con uno o dos meses de anticipaci√≥n, y he aparecido en medios como Chic Magazine y prensa local por ser pionero en llevar el visagismo a Tampico.</p>
                    <p>Mi objetivo es que cada asesor√≠a te brinde seguridad, confianza y claridad sobre tu imagen, para que logres proyectar exactamente lo que quieres en tu vida personal y profesional.</p>
                    
                    <div class="stats">
                        <div class="stat">
                            <div class="stat-number">5</div>
                            <div class="stat-label">A√±os de Experiencia</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">10,000+</div>
                            <div class="stat-label">Clientes Satisfechos</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">100%</div>
                            <div class="stat-label">Satisfacci√≥n</div>
                        </div>
                    </div>
                </div>
                <div class="about-image">
                    <img src="img/kikeguapo.jpeg" alt="Enrique Garza">
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="servicios" class="services">
        <div class="container">
            <h2 class="section-title">Servicios Profesionales</h2>
            <p class="section-subtitle">Elige el servicio que mejor se adapte a tus necesidades</p>
            
            <div class="services-grid">
                <!-- Service 1 -->
                <div class="service-card">
                    <h3>Corte de Cabello</h3>
                    <div class="service-price">$499 MXN</div>
                    <div class="service-duration">Duraci√≥n: 40 minutos</div>
                    <p class="service-description">Servicio de mantenimiento dise√±ado para conservar la estructura y proporci√≥n creadas en tu asesor√≠a previa. Se realizan ajustes precisos en longitud y forma para mantener la armon√≠a del rostro y el estilo equilibrado.</p>
                    <ul class="service-features">
                        <li>Limpieza y definici√≥n de contornos</li>
                        <li>Despunte y ajuste de vol√∫menes</li>
                        <li>Estilizado final</li>
                    </ul>
                    <p class="service-ideal"><strong>Ideal para:</strong> Clientes que ya cuentan con su visagismo definido y desean mantener su imagen con precisi√≥n y coherencia est√©tica.</p>
                    <button class="service-button" onclick="goToCalendly('corte')">Reservar Ahora</button>
                </div>

                <!-- Service 2 -->
                <div class="service-card">
                    <h3>Asesor√≠a Presencial ‚Äì Primera Consulta</h3>
                    <div class="service-price">$799 MXN</div>
                    <div class="service-duration">Duraci√≥n: 1 hora</div>
                    <p class="service-description">Sesi√≥n pr√°ctica donde combinamos el an√°lisis visagista con la ejecuci√≥n del corte. En una hora exploramos tus proporciones, estilo de vida y tipo de cabello para definir una direcci√≥n est√©tica clara y aplicarla directamente en el servicio.</p>
                    <ul class="service-features">
                        <li>Lavado capilar previo</li>
                        <li>Asesor√≠a de visagismo presencial</li>
                        <li>Corte adaptado a tus proporciones y necesidades personales</li>
                        <li>Recomendaciones b√°sicas de productos y cuidado capilar</li>
                    </ul>
                    <p class="service-ideal"><strong>Ideal para:</strong> Personas que buscan un cambio inmediato y funcional, con una asesor√≠a pr√°ctica enfocada en ejecutar el resultado durante la misma cita.</p>
                    <button class="service-button" onclick="goToCalendly('asesoria-presencial')">Reservar Ahora</button>
                </div>

                <!-- Service 3 -->
                <div class="service-card popular">
                    <div class="popular-badge">M√°s Completo</div>
                    <h3>Asesor√≠a de Visagismo en L√≠nea</h3>
                    <div class="service-price">$1,599 MXN</div>
                    <div class="service-duration">Duraci√≥n: 60 minutos</div>
                    <p class="service-description">Sesi√≥n completamente te√≥rica y visual dedicada a la concientizaci√≥n de tu comunicaci√≥n est√©tica. En esta charla analizamos tus proporciones, lenguaje corporal y objetivos personales para dise√±ar un estilo coherente con tu identidad.</p>
                    <ul class="service-features">
                        <li>An√°lisis est√©tico y de comunicaci√≥n visual</li>
                        <li>Edici√≥n de tus fotograf√≠as en vivo</li>
                        <li>Interpretaci√≥n de tu estilo ideal</li>
                        <li>Documento PDF con tu look sugerido y recomendaciones capilares</li>
                        <li>Gu√≠a para solicitar el corte en cualquier barber√≠a</li>
                        <li>Referencias visuales y elementos de tu est√©tica personal</li>
                    </ul>
                    <p class="service-ideal"><strong>Ideal para:</strong> Personas que desean comprender su imagen, visualizar su cambio antes de realizarlo y contar con una gu√≠a est√©tica completa y profesional.</p>
                    <button class="service-button" onclick="goToCalendly('asesoria-online')">Reservar Ahora</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Before After Section -->
    <section id="resultados" class="before-after">
        <div class="container">
            <h2 class="section-title">Resultados de Antes y Despu√©s</h2>
            <p class="section-subtitle">Descubre las transformaciones que han cambiado vidas</p>
            
            <div class="before-after-grid">
                <div class="before-after-item">
                    <img src="https://via.placeholder.com/300x300/CCCCCC/FFFFFF?text=Antes" alt="Antes">
                    <div class="before-after-content">
                        <h4>Transformaci√≥n Completa</h4>
                        <p>An√°lisis facial + corte personalizado que realz√≥ sus facciones naturales</p>
                    </div>
                </div>
                <div class="before-after-item">
                    <img src="https://via.placeholder.com/300x300/CCCCCC/FFFFFF?text=Despu√©s" alt="Despu√©s">
                    <div class="before-after-content">
                        <h4>Nuevo Estilo</h4>
                        <p>Look moderno que combina perfectamente con su personalidad</p>
                    </div>
                </div>
                <div class="before-after-item">
                    <img src="https://via.placeholder.com/300x300/CCCCCC/FFFFFF?text=Resultado" alt="Resultado">
                    <div class="before-after-content">
                        <h4>Visagismo Profesional</h4>
                        <p>An√°lisis detallado que transform√≥ completamente su apariencia</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="faq">
        <div class="container">
            <h2 class="section-title">Preguntas Frecuentes</h2>
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        ¬øQu√© es el visagismo?
                        <span class="faq-icon">‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <video class="faq-video" controls muted loop>
                            <source src="video/Download.mp4" type="video/mp4">
                            
                            Tu navegador no soporta videos HTML5.
                        </video>
                        <div class="faq-text">
                            El visagismo es una t√©cnica que analiza las proporciones faciales para crear cortes y estilos que realcen tus mejores caracter√≠sticas y equilibren tu rostro.
                        </div>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        ¬øCu√°nto tiempo dura una sesi√≥n?
                        <span class="faq-icon">‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <video class="faq-video" controls muted loop>
                            <source src="video/Download.mp4" type="video/mp4">
                            Tu navegador no soporta videos HTML5.
                        </video>
                        <div class="faq-text">
                            Una sesi√≥n completa de visagismo + corte dura aproximadamente 2 horas. Las asesor√≠as online duran 45 minutos.
                        </div>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        ¬øNecesito pagar antes de la cita?
                        <span class="faq-icon">‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <video class="faq-video" controls muted loop>
                            <source src="video/Download.mp4" type="video/mp4">
                            Tu navegador no soporta videos HTML5.
                        </video>
                        <div class="faq-text">
                            S√≠, para garantizar tu reserva necesitas realizar el pago completo antes de la cita. Esto nos permite ofrecerte el mejor servicio.
                        </div>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        ¬øQu√© incluye la asesor√≠a online?
                        <span class="faq-icon">‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <video class="faq-video" controls muted loop>
                            <source src="video/Download.mp4" type="video/mp4">
                            Tu navegador no soporta videos HTML5.
                        </video>
                        <div class="faq-text">
                            Incluye an√°lisis facial detallado, recomendaciones personalizadas, gu√≠a de estilos y seguimiento por WhatsApp durante una semana.
                        </div>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        ¬øPuedo cancelar mi cita?
                        <span class="faq-icon">‚ñº</span>
                    </div>
                    <div class="faq-answer">
                        <video class="faq-video" controls muted loop>
                            <source src="video/Download.mp4" type="video/mp4">
                            Tu navegador no soporta videos HTML5.
                        </video>
                        <div class="faq-text">
                            S√≠, puedes cancelar con 24 horas de anticipaci√≥n para recibir reembolso completo. Cancelaciones con menos tiempo tienen un cargo del 50%.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials">
        <div class="container">
            <h2 class="section-title">Lo que Dicen Nuestros Clientes</h2>
            <p class="section-subtitle">Testimonios reales de transformaciones exitosas</p>
            
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-stars">
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                    </div>
                    <p class="testimonial-text">
                        "Enrique transform√≥ completamente mi look. Su an√°lisis de visagismo fue incre√≠blemente preciso y el resultado super√≥ mis expectativas. Definitivamente recomiendo sus servicios."
                    </p>
                    <div class="testimonial-author">
                        <div class="author-avatar">M</div>
                        <div class="author-info">
                            <h4>Mar√≠a Gonz√°lez</h4>
                            <p>Cliente desde 2023</p>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-stars">
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                    </div>
                    <p class="testimonial-text">
                        "La asesor√≠a online fue perfecta. Enrique me ayud√≥ a encontrar mi estilo ideal sin salir de casa. Su conocimiento en visagismo es excepcional."
                    </p>
                    <div class="testimonial-author">
                        <div class="author-avatar">A</div>
                        <div class="author-info">
                            <h4>Ana Rodr√≠guez</h4>
                            <p>Asesor√≠a Online</p>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-stars">
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                    </div>
                    <p class="testimonial-text">
                        "Profesional, detallado y con un ojo incre√≠ble para el estilo. Enrique no solo corta cabello, crea arte. Mi confianza se dispar√≥ despu√©s de mi transformaci√≥n."
                    </p>
                    <div class="testimonial-author">
                        <div class="author-avatar">C</div>
                        <div class="author-info">
                            <h4>Carlos Mendoza</h4>
                            <p>Transformaci√≥n Completa</p>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-stars">
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                    </div>
                    <p class="testimonial-text">
                        "Incre√≠ble experiencia. Enrique me ense√±√≥ c√≥mo mantener mi nuevo look y me dio consejos personalizados. Su seguimiento por WhatsApp es un detalle que marca la diferencia."
                    </p>
                    <div class="testimonial-author">
                        <div class="author-avatar">L</div>
                        <div class="author-info">
                            <h4>Laura S√°nchez</h4>
                            <p>Paquete Completo</p>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-stars">
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                    </div>
                    <p class="testimonial-text">
                        "Despu√©s de a√±os buscando el estilo perfecto, Enrique lo encontr√≥ en una sola sesi√≥n. Su expertise en visagismo es impresionante. ¬°Altamente recomendado!"
                    </p>
                    <div class="testimonial-author">
                        <div class="author-avatar">R</div>
                        <div class="author-info">
                            <h4>Roberto Torres</h4>
                            <p>Cliente desde 2022</p>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-stars">
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                    </div>
                    <p class="testimonial-text">
                        "La atenci√≥n al detalle y el cuidado que Enrique pone en cada cliente es excepcional. No solo cambi√≥ mi look, cambi√≥ mi perspectiva sobre el estilo personal."
                    </p>
                    <div class="testimonial-author">
                        <div class="author-avatar">S</div>
                        <div class="author-info">
                            <h4>Sofia Herrera</h4>
                            <p>Transformaci√≥n Profesional</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <p>üìç Ubicaci√≥n: [direcci√≥n]</p>
                    <p>üìû Tel√©fono: [tel√©fono]</p>
                    <p>‚úâÔ∏è Email: [email]</p>
                </div>
                <div class="footer-section">
                    <h3>Servicios</h3>
                    <a href="#servicios">Corte de Cabello</a>
                    <a href="#servicios">Asesor√≠a Presencial</a>
                    <a href="#servicios">Asesor√≠a Online</a>
                </div>
                <div class="footer-section">
                    <h3>S√≠guenos</h3>
                    <div class="social-icons">
                        <a href="#" target="_blank" class="social-icon instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" target="_blank" class="social-icon tiktok">
                            <i class="fab fa-tiktok"></i>
                        </a>
                        <a href="https://wa.me/1234567890" target="_blank" class="social-icon whatsapp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Enrique Garza - Visagismo Profesional. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Video Modal -->
    <div id="videoModal" class="video-modal">
        <div class="video-modal-content">
            <span class="close-video" onclick="closeVideoModal()">&times;</span>
            <iframe id="videoFrame" src="" frameborder="0" allowfullscreen></iframe>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="payment-modal">
        <div class="payment-modal-content">
            <span class="close-payment" onclick="closePaymentModal()">&times;</span>
            <h3>Procesar Pago</h3>
            <p id="serviceInfo"></p>
            <div class="payment-form">
                <div class="form-group">
                    <label for="cardNumber">N√∫mero de Tarjeta</label>
                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456">
                </div>
                <div class="form-group">
                    <label for="expiryDate">Fecha de Vencimiento</label>
                    <input type="text" id="expiryDate" placeholder="MM/AA">
                </div>
                <div class="form-group">
                    <label for="cvv">CVV</label>
                    <input type="text" id="cvv" placeholder="123">
                </div>
                <div class="form-group">
                    <label for="cardName">Nombre en la Tarjeta</label>
                    <input type="text" id="cardName" placeholder="Juan P√©rez">
                </div>
                <button class="payment-button" onclick="processPayment()">Procesar Pago</button>
            </div>
        </div>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // FAQ Toggle
        function toggleFAQ(element) {
            const faqItem = element.parentElement;
            const answer = faqItem.querySelector('.faq-answer');
            const isActive = faqItem.classList.contains('active');

            // Close all other FAQ items
            document.querySelectorAll('.faq-item').forEach(item => {
                item.classList.remove('active');
                item.querySelector('.faq-answer').classList.remove('active');
            });

            // Toggle current item
            if (!isActive) {
                faqItem.classList.add('active');
                answer.classList.add('active');
            }
        }

        // Hero Video Controls
        let isMuted = true;
        let isPlaying = true;

        function toggleMute() {
            const iframe = document.getElementById('heroIframe');
            const muteBtn = document.getElementById('muteBtn');
            
            if (isMuted) {
                // Cambiar a con audio
                iframe.src = iframe.src.replace('&mute=1', '&mute=0');
                muteBtn.textContent = 'üîä';
                muteBtn.classList.add('active');
                isMuted = false;
            } else {
                // Cambiar a sin audio
                iframe.src = iframe.src.replace('&mute=0', '&mute=1');
                muteBtn.textContent = 'üîá';
                muteBtn.classList.remove('active');
                isMuted = true;
            }
        }

        function togglePlay() {
            const iframe = document.getElementById('heroIframe');
            const playBtn = document.getElementById('playBtn');
            
            if (isPlaying) {
                // Pausar video
                iframe.src = iframe.src.replace('&autoplay=1', '&autoplay=0');
                playBtn.textContent = '‚ñ∂Ô∏è';
                playBtn.classList.remove('active');
                isPlaying = false;
            } else {
                // Reproducir video
                iframe.src = iframe.src.replace('&autoplay=0', '&autoplay=1');
                playBtn.textContent = '‚è∏Ô∏è';
                playBtn.classList.add('active');
                isPlaying = true;
            }
        }

        // Video Modal Functions
        function openVideoModal(videoUrl) {
            // Mostrar notificaci√≥n elegante preguntando sobre el audio
            Swal.fire({
                title: 'üéµ ¬øActivar Audio?',
                html: `
                    <div style="text-align: center; margin: 20px 0;">
                        <p style="color: #666; font-size: 16px; margin-bottom: 20px;">
                            El video se reproducir√° autom√°ticamente. ¬øTe gustar√≠a activar el audio?
                        </p>
                        <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
                            <button id="audioOn" style="
                                background: #D4AF37; 
                                color: white; 
                                border: none; 
                                padding: 12px 24px; 
                                border-radius: 25px; 
                                cursor: pointer;
                                font-weight: bold;
                                transition: all 0.3s;
                            " onmouseover="this.style.background='#B8941F'" onmouseout="this.style.background='#D4AF37'">
                                üîä Con Audio
                            </button>
                            <button id="audioOff" style="
                                background: #f0f0f0; 
                                color: #333; 
                                border: 2px solid #ddd; 
                                padding: 12px 24px; 
                                border-radius: 25px; 
                                cursor: pointer;
                                font-weight: bold;
                                transition: all 0.3s;
                            " onmouseover="this.style.background='#e0e0e0'" onmouseout="this.style.background='#f0f0f0'">
                                üîá Sin Audio
                            </button>
                        </div>
                    </div>
                `,
                showConfirmButton: false,
                showCancelButton: false,
                allowOutsideClick: false,
                customClass: {
                    popup: 'swal-video-popup'
                },
                didOpen: () => {
                    // Agregar estilos personalizados
                    const style = document.createElement('style');
                    style.textContent = `
                        .swal-video-popup {
                            border-radius: 20px !important;
                            box-shadow: 0 20px 60px rgba(0,0,0,0.3) !important;
                        }
                        .swal2-popup {
                            padding: 30px !important;
                        }
                    `;
                    document.head.appendChild(style);
                    
                    // Manejar clicks en los botones
                    document.getElementById('audioOn').addEventListener('click', () => {
                        Swal.close();
                        openVideoWithAudio(videoUrl);
                    });
                    
                    document.getElementById('audioOff').addEventListener('click', () => {
                        Swal.close();
                        openVideoWithoutAudio(videoUrl);
                    });
                }
            });
        }

        function openVideoWithAudio(videoUrl) {
            const modal = document.getElementById('videoModal');
            const iframe = document.getElementById('videoFrame');
            iframe.src = videoUrl + '&autoplay=1&mute=0';
            modal.style.display = 'block';
        }

        function openVideoWithoutAudio(videoUrl) {
            const modal = document.getElementById('videoModal');
            const iframe = document.getElementById('videoFrame');
            iframe.src = videoUrl + '&autoplay=1&mute=1';
            modal.style.display = 'block';
        }

        function closeVideoModal() {
            const modal = document.getElementById('videoModal');
            const iframe = document.getElementById('videoFrame');
            iframe.src = '';
            modal.style.display = 'none';
        }

        // Payment Modal Functions
        function openPaymentModal(serviceName, price) {
            const modal = document.getElementById('paymentModal');
            const serviceInfo = document.getElementById('serviceInfo');
            serviceInfo.textContent = `${serviceName} - $${price} MXN`;
            modal.style.display = 'block';
        }

        function closePaymentModal() {
            const modal = document.getElementById('paymentModal');
            modal.style.display = 'none';
        }

        function processPayment() {
            // Here you would integrate with your payment gateway
            alert('Redirigiendo a la pasarela de pago...');
            // In a real implementation, you would:
            // 1. Validate the form
            // 2. Send data to your PHP backend
            // 3. Process payment through gateway (Stripe, PayPal, etc.)
            // 4. Handle success/error responses
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            const videoModal = document.getElementById('videoModal');
            const paymentModal = document.getElementById('paymentModal');
            
            if (event.target === videoModal) {
                closeVideoModal();
            }
            if (event.target === paymentModal) {
                closePaymentModal();
            }
        }

        // Mobile menu toggle (if needed)
        function toggleMobileMenu() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('active');
        }

        // Add scroll effect to header
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(44, 62, 80, 0.95)';
                header.style.backdropFilter = 'blur(10px)';
            } else {
                header.style.background = '#2c3e50';
                header.style.backdropFilter = 'none';
            }
        });

        // Fix Calendly scroll issues on mobile
        function fixCalendlyScroll() {
            // Force page scroll to work
            document.body.style.overflow = 'auto';
            document.documentElement.style.overflow = 'auto';
            document.body.style.position = 'static';
            
            // Add touch event listeners to prevent iframe scroll capture
            document.addEventListener('touchstart', function(e) {
                if (e.target.closest('.calendar-container')) {
                    e.stopPropagation();
                }
            }, { passive: true });
            
            document.addEventListener('touchmove', function(e) {
                if (e.target.closest('.calendar-container')) {
                    e.stopPropagation();
                }
            }, { passive: true });
        }

        // Initialize scroll fix
        document.addEventListener('DOMContentLoaded', fixCalendlyScroll);
        
        // Re-apply fix when iframe loads
        window.addEventListener('load', fixCalendlyScroll);

        // Mobile service card expansion
        function initMobileServiceCards() {
            const serviceCards = document.querySelectorAll('.service-card');
            
            serviceCards.forEach(card => {
                // Add click handler for mobile expansion
                card.addEventListener('click', function(e) {
                    // Only expand on mobile devices
                    if (window.innerWidth <= 768) {
                        // Don't expand if clicking the button
                        if (e.target.classList.contains('service-button')) {
                            return;
                        }
                        
                        // Toggle expansion
                        if (card.classList.contains('mobile-expanded')) {
                            closeMobileServiceCard(card);
                        } else {
                            openMobileServiceCard(card);
                        }
                    }
                });
            });
        }

        function openMobileServiceCard(card) {
            // Close any other expanded cards
            document.querySelectorAll('.service-card.mobile-expanded').forEach(expandedCard => {
                closeMobileServiceCard(expandedCard);
            });
            
            // Add close button
            const closeBtn = document.createElement('button');
            closeBtn.className = 'mobile-close-btn';
            closeBtn.innerHTML = '√ó';
            closeBtn.onclick = (e) => {
                e.stopPropagation();
                closeMobileServiceCard(card);
            };
            card.appendChild(closeBtn);
            
            // Expand the card
            card.classList.add('mobile-expanded');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileServiceCard(card) {
            card.classList.remove('mobile-expanded');
            const closeBtn = card.querySelector('.mobile-close-btn');
            if (closeBtn) {
                closeBtn.remove();
            }
            document.body.style.overflow = 'auto';
        }

        // Initialize mobile service cards
        document.addEventListener('DOMContentLoaded', initMobileServiceCards);

        // Check if user already paid (prevent double payment)
        function checkExistingPayment() {
            const paymentData = localStorage.getItem('payment_completed');
            if (paymentData) {
                try {
                    const payment = JSON.parse(paymentData);
                    // Check if payment is recent (within 24 hours)
                    const hoursSincePayment = (Date.now() - payment.timestamp) / (1000 * 60 * 60);
                    if (hoursSincePayment < 24) {
                        // Check if user already has a booking
                        if (payment.hasBooking) {
                            console.log('üîí User already has a booking, blocking calendar');
                            blockCalendarAfterBooking();
                            return true;
                        } else {
                            // User paid but no booking yet, unlock calendar
                            console.log('‚úÖ User paid but no booking yet, unlocking calendar');
                            showCalendar(payment.service);
                            return true;
                        }
                    } else {
                        // Payment is old, remove it
                        localStorage.removeItem('payment_completed');
                    }
                } catch (e) {
                    localStorage.removeItem('payment_completed');
                }
            }
            return false;
        }

        // Check payment on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîç Page loaded, checking payment status...');
            
            // Debug: Show localStorage data
            const paymentData = localStorage.getItem('payment_completed');
            if (paymentData) {
                console.log('üíæ Payment data in localStorage:', JSON.parse(paymentData));
            } else {
                console.log('‚ùå No payment data in localStorage');
            }
            
            if (checkExistingPayment()) {
                console.log('‚úÖ Payment status checked');
            }
            
            // Page loaded successfully
        });


        // Function to block calendar after successful booking
        function blockCalendarAfterBooking() {
            console.log('üîí Blocking calendar after booking...');
            
            // Small delay to ensure DOM is ready
            setTimeout(() => {
                const calendarContainer = document.getElementById('calendarContainer');
                if (calendarContainer) {
                    // Hide the iframe
                    const iframe = document.getElementById('calendlyIframe');
                    if (iframe) {
                        iframe.style.display = 'none';
                    }
                    
                    // Hide the scroll wrapper
                    const scrollWrapper = calendarContainer.querySelector('.calendar-scroll-wrapper');
                    if (scrollWrapper) {
                        scrollWrapper.style.display = 'none';
                    }
                    
                    // Show blocked message
                    calendarContainer.innerHTML = `
                        <div style="text-align: center; padding: 40px; background: #f8f9fa; border-radius: 10px; border: 2px solid #D4AF37;">
                            <div style="font-size: 4rem; margin-bottom: 20px;">‚úÖ</div>
                            <h3 style="color: #D4AF37; margin-bottom: 15px;">¬°Cita Confirmada!</h3>
                            <p style="color: #666; margin-bottom: 20px;">Tu cita ha sido reservada exitosamente.</p>
                            <p style="color: #999; font-size: 0.9rem; margin-bottom: 20px;">üìß Recibir√°s un email de confirmaci√≥n</p>
                            <div style="background: #e8f4fd; padding: 15px; border-radius: 8px; border-left: 4px solid #D4AF37;">
                                <p style="color: #666; font-size: 0.9rem; margin: 0;">
                                    <strong>üí° Tip:</strong> Si quieres hacer otra reserva, recarga la p√°gina (F5)
                                </p>
                            </div>
                        </div>
                    `;
                }
            }, 100);
        }

        // Scroll to payment section
        function goToCalendly(service) {
            console.log('üéØ Scrolling to payment section for service:', service);
            
            // Guardar el servicio seleccionado
            selectedService = service;
            
            // Hacer scroll suave hacia la secci√≥n de pago (que est√° m√°s abajo)
            const paymentSection = document.getElementById('reservar');
            if (paymentSection) {
                paymentSection.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        }

        // Payment and Service Selection - FUNCTIONAL
        let selectedService = null;
        let selectedPrice = null;
        let stripe = null;
        let paypalButtons = null;

        // Initialize Stripe (replace with your publishable key)
        const STRIPE_PUBLISHABLE_KEY = 'pk_test_your_stripe_publishable_key_here';
        
        // Initialize payment systems
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Stripe
            if (typeof Stripe !== 'undefined') {
                stripe = Stripe(STRIPE_PUBLISHABLE_KEY);
            }
        });

        function selectService(service, price) {
            selectedService = service;
            selectedPrice = price;
            
            // Show payment modal
            showPaymentModal(service, price);
        }

        function showPaymentModal(service, price) {
            Swal.fire({
                title: 'üí≥ Procesar Pago',
                html: `
                    <div style="text-align: center; margin: 20px 0;">
                        <h3 style="color: #D4AF37; margin-bottom: 20px;">${getServiceName(service)} - $${price} MXN</h3>
                        <p style="color: #666; margin-bottom: 30px;">Una vez confirmado el pago, podr√°s seleccionar tu fecha y hora</p>
                        
                        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                            <button id="mercadopagoBtn" style="
                                background: #00A1F1; 
                                color: white; 
                                border: none; 
                                padding: 15px 25px; 
                                border-radius: 25px; 
                                cursor: pointer;
                                font-weight: bold;
                                transition: all 0.3s;
                                flex: 1;
                            " onmouseover="this.style.background='#0088CC'" onmouseout="this.style.background='#00A1F1'">
                                üí≥ Pagar con Mercado Pago
                            </button>
                            <button id="paypalBtn" style="
                                background: #0070BA; 
                                color: white; 
                                border: none; 
                                padding: 15px 25px; 
                                border-radius: 25px; 
                                cursor: pointer;
                                font-weight: bold;
                                transition: all 0.3s;
                                flex: 1;
                            " onmouseover="this.style.background='#005EA6'" onmouseout="this.style.background='#0070BA'">
                                üí∞ Pagar con PayPal
                            </button>
                        </div>
                        
                        <div style="margin-top: 20px; padding: 15px; background: #f8f8f8; border-radius: 10px;">
                            <p style="font-size: 14px; color: #666; margin: 0;">
                                üîí Pago 100% seguro ‚Ä¢ Recibir√°s confirmaci√≥n por email
                            </p>
                        </div>
                    </div>
                `,
                showConfirmButton: false,
                showCancelButton: true,
                cancelButtonText: 'Cancelar',
                allowOutsideClick: false,
                customClass: {
                    popup: 'swal-payment-popup'
                },
                didOpen: () => {
                    // Add custom styles
                    const style = document.createElement('style');
                    style.textContent = `
                        .swal-payment-popup {
                            border-radius: 20px !important;
                            box-shadow: 0 20px 60px rgba(0,0,0,0.3) !important;
                        }
                        .swal2-popup {
                            padding: 30px !important;
                        }
                    `;
                    document.head.appendChild(style);
                    
                    // Handle payment buttons
                    document.getElementById('mercadopagoBtn').addEventListener('click', () => {
                        processMercadoPagoPayment(service, price);
                    });
                    
                    document.getElementById('paypalBtn').addEventListener('click', () => {
                        processPayPalPayment(service, price);
                    });
                }
            });
        }

        function getServiceName(service) {
            const names = {
                'corte': 'Corte de Cabello',
                'asesoria-presencial': 'Asesor√≠a Presencial ‚Äì Primera Consulta',
                'asesoria-online': 'Asesor√≠a de Visagismo en L√≠nea'
            };
            return names[service] || 'Servicio';
        }

        // MERCADO PAGO PAYMENT - FUNCTIONAL
        async function processMercadoPagoPayment(service, price) {
            try {
                // Show loading
                Swal.fire({
                    title: '‚è≥ Procesando con Stripe...',
                    text: 'Redirigiendo a Stripe para completar el pago',
                    allowOutsideClick: false,
                    showConfirmButton: false,
                    didOpen: () => {
                        Swal.showLoading();
                    }
                });

                // Create payment intent on your backend
                const response = await fetch('/create-payment-intent', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        service: service,
                        amount: price * 100, // Convert to cents
                        currency: 'mxn'
                    })
                });

                const { clientSecret } = await response.json();

                // Confirm payment with Stripe
                const { error, paymentIntent } = await stripe.confirmPayment({
                    clientSecret: clientSecret,
                    confirmParams: {
                        return_url: window.location.href + '#success'
                    }
                });

                if (error) {
                    Swal.fire({
                        title: '‚ùå Error en el Pago',
                        text: error.message,
                        icon: 'error',
                        confirmButtonText: 'Intentar de Nuevo',
                        confirmButtonColor: '#D4AF37'
                    });
                } else if (paymentIntent.status === 'succeeded') {
                    Swal.fire({
                        title: '‚úÖ ¬°Pago Exitoso!',
                        text: 'Tu pago ha sido procesado correctamente. Ahora puedes seleccionar tu fecha y hora.',
                        icon: 'success',
                        confirmButtonText: 'Continuar',
                        confirmButtonColor: '#D4AF37'
                    }).then(() => {
                        showCalendar(service);
                    });
                }
            } catch (error) {
                console.error('Error:', error);
                Swal.fire({
                    title: '‚ùå Error',
                    text: 'Hubo un problema procesando el pago. Por favor intenta de nuevo.',
                    icon: 'error',
                    confirmButtonText: 'OK',
                    confirmButtonColor: '#D4AF37'
                });
            }
        }

        // PAYPAL PAYMENT - FUNCTIONAL
        function processPayPalPayment(service, price) {
            Swal.fire({
                title: 'üí∞ PayPal',
                html: `
                    <div id="paypal-button-container" style="margin: 20px 0;"></div>
                `,
                showConfirmButton: false,
                showCancelButton: true,
                cancelButtonText: 'Cancelar',
                allowOutsideClick: false,
                didOpen: () => {
                    // Wait for PayPal SDK to load
                    const checkPayPal = () => {
                        if (typeof paypal !== 'undefined') {
                        paypal.Buttons({
                            style: {
                                layout: 'vertical',
                                color: 'gold',
                                shape: 'rect',
                                label: 'paypal'
                            },
                            createOrder: function(data, actions) {
                                return actions.order.create({
                                    purchase_units: [{
                                        amount: {
                                            value: price.toString(),
                                            currency_code: 'MXN'
                                        },
                                        description: getServiceName(service)
                                    }]
                                });
                            },
                            onApprove: function(data, actions) {
                                return actions.order.capture().then(function(details) {
                                    // Guardar pago en base de datos
                                    fetch('/save-payment.php', {
                                        method: 'POST',
                                        headers: {
                                            'Content-Type': 'application/json',
                                        },
                                        body: JSON.stringify({
                                            service: service,
                                            price: price,
                                            payment_id: details.id,
                                            payer_email: details.payer.email_address,
                                            status: 'completed'
                                        })
                                    }).then(response => response.json())
                                    .then(data => {
                                        if (data.success) {
                                            // Guardar en localStorage para persistencia
                                            localStorage.setItem('payment_completed', JSON.stringify({
                                                service: service,
                                                price: price,
                                                payment_id: details.id,
                                                payer_email: details.payer.email_address,
                                                timestamp: Date.now(),
                                            }));
                                            
                                            Swal.fire({
                                                title: '‚úÖ ¬°Pago Exitoso!',
                                                text: 'Tu pago ha sido procesado correctamente. Ahora puedes seleccionar tu fecha y hora.',
                                                icon: 'success',
                                                confirmButtonText: 'Continuar',
                                                confirmButtonColor: '#D4AF37'
                                            }).then(() => {
                                                showCalendar(service);
                                            });
                                        } else {
                                            throw new Error('Failed to save payment');
                                        }
                                    }).catch(error => {
                                        console.error('Error saving payment:', error);
                                        Swal.fire({
                                            title: '‚ö†Ô∏è Pago Exitoso pero con Advertencia',
                                            text: 'Tu pago fue procesado pero hubo un problema guardando los datos. El calendario se desbloque√≥ de todas formas.',
                                            icon: 'warning',
                                            confirmButtonText: 'Continuar',
                                            confirmButtonColor: '#D4AF37'
                                        }).then(() => {
                                            showCalendar(service);
                                        });
                                    });
                                }).catch(function(error) {
                                    console.error('‚ùå PayPal capture error:', error);
                                    Swal.fire({
                                        title: '‚ùå Error en el Pago',
                                        text: 'Hubo un problema procesando tu pago. Por favor intenta de nuevo.',
                                        icon: 'error',
                                        confirmButtonText: 'OK',
                                        confirmButtonColor: '#D4AF37'
                                    });
                                });
                            },
                            onError: function(err) {
                                console.error('PayPal Error:', err);
                                Swal.fire({
                                    title: '‚ùå Error en el Pago',
                                    text: `Error: ${err.message || 'Problema con PayPal. Verifica que est√©s en modo Sandbox si es necesario.'}`,
                                    icon: 'error',
                                    confirmButtonText: 'OK',
                                    confirmButtonColor: '#D4AF37'
                                });
                            }
                        }).render('#paypal-button-container');
                        } else {
                            console.log('PayPal SDK not ready, retrying...');
                            setTimeout(checkPayPal, 500);
                        }
                    };
                    
                    // Start checking
                    checkPayPal();
                    
                    // Fallback after 5 seconds
                    setTimeout(() => {
                        if (typeof paypal === 'undefined') {
                            console.error('PayPal SDK not loaded after timeout');
                            document.getElementById('paypal-button-container').innerHTML = 
                                '<p style="color: #666;">PayPal SDK no se carg√≥ correctamente. Recarga la p√°gina e intenta de nuevo.</p>';
                        }
                    }, 5000);
                }
            });
        }

        function showCalendar(service) {
            // Hide payment selection
            document.querySelector('.payment-selection').style.display = 'none';
            
            // Unlock calendar
            const calendarContainer = document.getElementById('calendarContainer');
            const iframe = document.getElementById('calendlyIframe');
            
            // Remove locked class and add unlocked class
            calendarContainer.classList.remove('locked');
            calendarContainer.classList.add('unlocked');
            
            // Set different Calendly URLs based on service
            const calendlyUrls = {
                'corte': 'https://calendly.com/alexander-hernandez-iest/corte-de-cabello-visagismo',
                'asesoria': 'https://calendly.com/alexander-hernandez-iest/corte-asesoria-visagismo',
                'completo': 'https://calendly.com/alexander-hernandez-iest/corte-asesoria-visagismo'
            };
            
            iframe.src = calendlyUrls[service] || calendlyUrls['corte'];
            
            // Add manual confirmation button (initially visible)
            const manualConfirmDiv = document.createElement('div');
            manualConfirmDiv.id = 'manualConfirmDiv';
            manualConfirmDiv.style.cssText = `
                text-align: center; 
                padding: 20px; 
                background: #f8f9fa; 
                border-radius: 10px; 
                margin-top: 20px;
                border: 2px solid #D4AF37;
                display: block; /* Initially visible */
            `;
            manualConfirmDiv.innerHTML = `
                <h4 style="color: #D4AF37; margin-bottom: 15px;">¬øYa completaste tu reserva?</h4>
                <p style="color: #666; margin-bottom: 20px; font-size: 14px;">Si ya seleccionaste tu fecha y hora, confirma aqu√≠:</p>
                <button onclick="handleScheduleEvent()" style="
                    background: #D4AF37; 
                    color: white; 
                    border: none; 
                    padding: 12px 24px; 
                    border-radius: 25px; 
                    cursor: pointer;
                    font-weight: bold;
                    font-size: 16px;
                ">‚úÖ Confirmar Mi Reserva</button>
            `;
            
            calendarContainer.appendChild(manualConfirmDiv);
            
            // Scroll to calendar
            calendarContainer.scrollIntoView({ behavior: 'smooth' });
            
            // Setup Calendly event detection
            setupCalendlyDetection();
        }
        
        // Detect Calendly events and button clicks
        function setupCalendlyDetection() {
            console.log('üîç Setting up Calendly detection...');
            setupCalendlyListener();
        }

        // Check if user already has a booking
        async function checkExistingBooking() {
            const paymentData = localStorage.getItem('payment_completed');
            if (!paymentData) {
                return false;
            }

            try {
                const payment = JSON.parse(paymentData);
                const response = await fetch('/check-booking.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        customer_email: payment.payer_email || 'unknown@example.com',
                        payment_id: payment.payment_id 
                    })
                });
                
                const result = await response.json();
                return result.has_booking || false;
            } catch (error) {
                console.error('Error checking existing booking:', error);
                return false;
            }
        }

        // Setup Calendly event listener
        function setupCalendlyListener() {
            console.log('üîç Setting up ENHANCED Calendly detection...');
            
            let bookingDetected = false;
            
            // Method 1: Listen for postMessage events from Calendly
            window.addEventListener('message', function(event) {
                if (event.origin.includes('calendly.com') || event.origin.includes('app.calendly.com')) {
                    console.log('üìÖ Calendly message:', event.data);
                    
                    // Check for any event data
                    if (event.data && typeof event.data === 'object') {
                        // Check for event type
                        if (event.data.type) {
                            console.log('üéØ Event type:', event.data.type);
                            
                            // Trigger on any significant Calendly event
                            if (event.data.type.includes('scheduled') || 
                                event.data.type.includes('submitted') || 
                                event.data.type.includes('created') ||
                                event.data.type.includes('confirmed') ||
                                event.data.type.includes('booked')) {
                                console.log('üéâ Calendly booking event detected via postMessage!');
                                if (!bookingDetected) {
                                    bookingDetected = true;
                                    setTimeout(() => handleScheduleEvent(), 2000);
                                }
                            }
                        }
                        
                        // Check for event data structure
                        if (event.data.event) {
                            console.log('üéØ Event data:', event.data.event);
                            if (event.data.event.includes('scheduled') || 
                                event.data.event.includes('booked') ||
                                event.data.event.includes('confirmed')) {
                                console.log('üéâ Calendly booking event detected via event data!');
                                if (!bookingDetected) {
                                    bookingDetected = true;
                                    setTimeout(() => handleScheduleEvent(), 2000);
                                }
                            }
                        }
                    }
                }
            });
            
            // Method 2: Monitor iframe src changes
            let lastSrc = '';
            const iframe = document.getElementById('calendlyIframe');
            
            const checkSrcChanges = () => {
                const currentSrc = iframe.src;
                if (currentSrc !== lastSrc && currentSrc !== '') {
                    console.log('üìù Iframe src changed:', currentSrc);
                    lastSrc = currentSrc;
                    
                    // Check for success indicators in URL
                    if (currentSrc.includes('success') || 
                        currentSrc.includes('confirmed') || 
                        currentSrc.includes('thank') ||
                        currentSrc.includes('scheduled') ||
                        currentSrc.includes('booked')) {
                        console.log('‚úÖ Success URL detected!');
                        if (!bookingDetected) {
                            bookingDetected = true;
                            setTimeout(() => handleScheduleEvent(), 2000);
                        }
                    }
                }
            };
            
            // Check src changes every 1 second (more frequent)
            const srcInterval = setInterval(checkSrcChanges, 1000);
            
            // Method 3: Detect clicks and check for success
            iframe.addEventListener('click', () => {
                console.log('üñ±Ô∏è Click detected in Calendly');
                setTimeout(() => {
                    const currentSrc = iframe.src;
                    if (currentSrc.includes('success') || 
                        currentSrc.includes('confirmed') || 
                        currentSrc.includes('thank') ||
                        currentSrc.includes('scheduled')) {
                        console.log('‚úÖ Click led to success page!');
                        handleScheduleEvent();
                    }
                }, 3000);
            });
            
            // Clean up intervals after 15 minutes
            setTimeout(() => {
                clearInterval(srcInterval);
                console.log('‚è∞ Calendly detection stopped after 15 minutes');
            }, 900000);
        }
        
        // Handle when Schedule Event is clicked
        function handleScheduleEvent() {
            console.log('üéä SCHEDULE EVENT CLICKED! Processing reservation...');
            
            // Hide manual button immediately
            const manualDiv = document.getElementById('manualConfirmDiv');
            if (manualDiv) {
                manualDiv.style.display = 'none';
            }
            
            // Check if already processing to prevent duplicates
            if (window.bookingInProgress) {
                console.log('‚ö†Ô∏è Booking already in progress, ignoring duplicate event');
                return;
            }
            
            // Check for recent booking attempt (within last 30 seconds)
            const lastBookingAttempt = localStorage.getItem('last_booking_attempt');
            if (lastBookingAttempt) {
                const timeSinceLastAttempt = Date.now() - parseInt(lastBookingAttempt);
                if (timeSinceLastAttempt < 30000) { // 30 seconds
                    console.log('‚ö†Ô∏è Recent booking attempt detected, ignoring duplicate');
                    return;
                }
            }
            
            // Set timestamp for this booking attempt
            localStorage.setItem('last_booking_attempt', Date.now().toString());
            
            // Check if user already has a booking in localStorage
            const paymentData = localStorage.getItem('payment_completed');
            if (!paymentData) {
                console.warn('‚ö†Ô∏è No payment data found in localStorage');
                return;
            }
            
            const payment = JSON.parse(paymentData);
            
            window.bookingInProgress = true;
            console.log('üí≥ Payment data found:', payment);
            
            // Save booking to database (server will check for duplicates)
            const bookingData = {
                customer_email: payment.payer_email || 'unknown@example.com',
                customer_name: 'Cliente', // Default name
                customer_phone: '', // Empty phone
                service: payment.service,
                appointment_date: new Date().toISOString().slice(0, 19).replace('T', ' '),
                calendly_event_id: 'temp_' + Date.now() // Temporary event ID
            };
            
            console.log('üíæ Saving booking data:', bookingData);
            
            fetch('/save-booking.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(bookingData)
            }).then(response => {
                if (response.status === 409) {
                    // Conflict - user already has a booking
                    return response.json().then(data => {
                        throw new Error('DUPLICATE_BOOKING');
                    });
                }
                return response.json();
            })
            .then(data => {
                console.log('‚úÖ Booking saved successfully:', data);
                
                // Update localStorage to mark booking as completed
                const updatedPayment = {
                    ...payment,
                    hasBooking: true,
                    bookingDate: bookingData.appointment_date,
                    bookingId: data.booking_id || 'temp_id'
                };
                localStorage.setItem('payment_completed', JSON.stringify(updatedPayment));
                
                // Hide manual confirmation button
                const manualConfirmDiv = document.getElementById('manualConfirmDiv');
                if (manualConfirmDiv) {
                    manualConfirmDiv.style.display = 'none';
                }
                
                // Show success message
                Swal.fire({
                    title: '‚úÖ ¬°Cita Confirmada!',
                    text: 'Tu cita ha sido reservada exitosamente. Recibir√°s un email de confirmaci√≥n.',
                    icon: 'success',
                    confirmButtonText: 'Perfecto',
                    confirmButtonColor: '#D4AF37'
                }).then(() => {
                    // Block calendar after successful booking
                    console.log('üîí Blocking calendar after successful booking...');
                    blockCalendarAfterBooking();
                });
                
                console.log('üéØ Booking process completed!');
                window.bookingInProgress = false;
            }).catch(error => {
                console.error('‚ùå Error saving booking:', error);
                
                if (error.message === 'DUPLICATE_BOOKING') {
                    // User already has a booking
                    Swal.fire({
                        title: '‚ö†Ô∏è Ya tienes una cita',
                        text: 'Ya tienes una cita confirmada. Si necesitas cambiarla, cont√°ctanos.',
                        icon: 'warning',
                        confirmButtonText: 'Entendido',
                        confirmButtonColor: '#D4AF37'
                    });
                    
                    // Update localStorage to reflect this
                    const updatedPayment = {
                        ...payment,
                        hasBooking: true
                    };
                    localStorage.setItem('payment_completed', JSON.stringify(updatedPayment));
                } else {
                    Swal.fire({
                        title: '‚ùå Error',
                        text: 'Hubo un problema al guardar tu cita. Por favor contacta al soporte.',
                        icon: 'error',
                        confirmButtonText: 'OK',
                        confirmButtonColor: '#D4AF37'
                    });
                }
                window.bookingInProgress = false;
            });
        }
    </script>
</body>
</html>